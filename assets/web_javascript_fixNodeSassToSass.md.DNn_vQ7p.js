import{_ as a,c as e,o as t,ae as o}from"./chunks/framework.B8KKhRA6.js";const b=JSON.parse('{"title":"前端项目里将node-sass包迁移至sass包","description":"","frontmatter":{"title":"前端项目里将node-sass包迁移至sass包","author":"刘军","location":"武汉","date":"2024-07-08T00:00:00.000Z"},"headers":[],"relativePath":"web/javascript/fixNodeSassToSass.md","filePath":"web/javascript/fixNodeSassToSass.md","lastUpdated":1720430738000}'),r={name:"web/javascript/fixNodeSassToSass.md"};function d(n,s,l,i,p,c){return t(),e("div",null,s[0]||(s[0]=[o('<h1 id="前端项目里将node-sass包迁移至sass包" tabindex="-1">前端项目里将node-sass包迁移至sass包 <a class="header-anchor" href="#前端项目里将node-sass包迁移至sass包" aria-label="Permalink to &quot;前端项目里将node-sass包迁移至sass包&quot;">​</a></h1><h3 id="起因" tabindex="-1">起因 <a class="header-anchor" href="#起因" aria-label="Permalink to &quot;起因&quot;">​</a></h3><p>最近接手公司从外部采购的一个项目。这个项目是用vue-admin-template改的，项目里sass编译用的是node-sass。众所周知，node-sass是一个极其难用的npm包。因为该包和node的版本相关，基本上依赖这个包的项目，初始化太麻烦。</p><p>因为最近刚换电脑，首次npm i该项目时，总是报错。网络上大部分指向的解决方法是换node版本。哎，不想换。所以继续折腾。最后发现可以用sass包替换node-sass。抱着试一试的态度，试了一下。确实有用，故记录一下。</p><h3 id="sass和node-sass" tabindex="-1">sass和node-sass <a class="header-anchor" href="#sass和node-sass" aria-label="Permalink to &quot;sass和node-sass&quot;">​</a></h3><p>node-sass与dart-sass（现在已经改名sass）都是用来将sass编译成css的工具，都依赖于sass-loader<br> 1、node-sass与node.js版本相互关联，版本必须对应<br> 2、dart-sass已经更名为sass<br> 3、dart-sass不支持/deep/语法，要改成为::v-deep<br> 4、node-sass是用node来自动编译sass，而dart-sass是用dart VM编译，dart-sass需要保存后才会生效<br> 5、dart-sass 性能更好，不存在依赖二进制文件即可完成安装，并且兼容sass和cssx新特性，而node-sass依赖node版本</p><h3 id="升级步骤" tabindex="-1">升级步骤 <a class="header-anchor" href="#升级步骤" aria-label="Permalink to &quot;升级步骤&quot;">​</a></h3><p>1、npm uninstall node-sass<br> 2、npm install sass@1.32.6<br> 3、npm install sass-loader@10.2.1<br> 4、将项目所有用到 /deep/ 的写法，替换为 ::v-deep</p><blockquote><p>注意你的webpack版本，sass-loader v11以后需要webpack v5才能兼容，我们是webpack4，所以将sass-loader降级为v10</p></blockquote><h3 id="错误代码-err-ossl-evp-unsupported-的处理" tabindex="-1">错误代码 ERR_OSSL_EVP_UNSUPPORTED 的处理 <a class="header-anchor" href="#错误代码-err-ossl-evp-unsupported-的处理" aria-label="Permalink to &quot;错误代码 ERR_OSSL_EVP_UNSUPPORTED 的处理&quot;">​</a></h3><p>如果按上面的步骤处理了，还是报错。可能是node版本太高了，导致和以前的openssl版本不兼容。将package.json里script命令的脚本内容<code>vue-cli-service serve</code>替换下面即可</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;SET NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service serve&quot;</span></span></code></pre></div><h3 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-label="Permalink to &quot;参考链接&quot;">​</a></h3><p><a href="https://blog.csdn.net/weixin_42190844/article/details/124724994" target="_blank" rel="noreferrer">vue-admin-template项目将node-sass迁移至dart-sass踩坑记录</a><br><a href="https://blog.csdn.net/qiaohuyue/article/details/127753386" target="_blank" rel="noreferrer">错误代码 ERR_OSSL_EVP_UNSUPPORTED</a></p>',14)]))}const u=a(r,[["render",d]]);export{b as __pageData,u as default};
