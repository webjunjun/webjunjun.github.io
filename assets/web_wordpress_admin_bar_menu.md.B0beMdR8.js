import{_ as i,c as a,o as n,ae as h}from"./chunks/framework.B8KKhRA6.js";const g=JSON.parse('{"title":"admin_bar_menu钩子详解","description":"","frontmatter":{"title":"admin_bar_menu钩子详解","author":"刘军","location":"武汉","date":"2025-11-27T00:00:00.000Z"},"headers":[],"relativePath":"web/wordpress/admin_bar_menu.md","filePath":"web/wordpress/admin_bar_menu.md","lastUpdated":1764227611000}'),t={name:"web/wordpress/admin_bar_menu.md"};function l(e,s,k,p,d,r){return n(),a("div",null,s[0]||(s[0]=[h(`<h1 id="admin-bar-menu-钩子详解" tabindex="-1"><code>admin_bar_menu</code> 钩子详解 <a class="header-anchor" href="#admin-bar-menu-钩子详解" aria-label="Permalink to &quot;\`admin_bar_menu\` 钩子详解&quot;">​</a></h1><h2 id="一、钩子基础定义" tabindex="-1">一、钩子基础定义 <a class="header-anchor" href="#一、钩子基础定义" aria-label="Permalink to &quot;一、钩子基础定义&quot;">​</a></h2><p><code>admin_bar_menu</code> 是 WordPress 中的核心<strong>动作钩子（Action Hook）</strong>，专门用于在管理工具栏（Admin Bar，即登录状态下顶部的黑色导航条）渲染阶段，对菜单结构进行修改、扩展或移除操作。</p><h2 id="二、核心作用" tabindex="-1">二、核心作用 <a class="header-anchor" href="#二、核心作用" aria-label="Permalink to &quot;二、核心作用&quot;">​</a></h2><p>当 WordPress 构建管理工具栏时，该钩子会触发回调函数，允许开发者实现以下功能：</p><ul><li>添加自定义一级菜单、二级子菜单；</li><li>移除工具栏中的默认菜单（如「评论」「WordPress 标志」「站点名称」等）；</li><li>修改现有菜单的标题、跳转链接、样式类、打开方式等属性；</li><li>整合自定义主题/插件的功能入口到管理工具栏。</li></ul><h2 id="三、触发时机与原理" tabindex="-1">三、触发时机与原理 <a class="header-anchor" href="#三、触发时机与原理" aria-label="Permalink to &quot;三、触发时机与原理&quot;">​</a></h2><ol><li><strong>触发流程</strong>： <ul><li>WordPress 先通过 <code>wp_admin_bar_init()</code> 函数实例化 <code>WP_Admin_Bar</code> 类，生成 <code>$wp_admin_bar</code> 对象；</li><li>随后调用 <code>do_action_ref_array( &#39;admin_bar_menu&#39;, array( &amp;$wp_admin_bar ) )</code>，触发钩子并传递对象参数；</li><li>回调函数通过 <code>$wp_admin_bar</code> 对象的方法操作菜单，最终渲染工具栏。</li></ul></li><li><strong>触发位置</strong>：核心源码位于 <code>wp-includes/admin-bar.php</code> 文件。</li></ol><h2 id="四、钩子参数说明" tabindex="-1">四、钩子参数说明 <a class="header-anchor" href="#四、钩子参数说明" aria-label="Permalink to &quot;四、钩子参数说明&quot;">​</a></h2><p>该钩子仅传递一个核心参数，也是操作菜单的关键对象：</p><table tabindex="0"><thead><tr><th>参数名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>$wp_admin_bar</code></td><td><code>WP_Admin_Bar</code></td><td>管理工具栏的实例对象，包含操作菜单的核心方法（如 <code>add_menu()</code>、<code>remove_node()</code> 等）</td></tr></tbody></table><p><strong>参数获取方式</strong>：在回调函数中直接接收，示例：</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin_bar_menu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;custom_callback&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">999</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> custom_callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($wp_admin_bar) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 通过 $wp_admin_bar 操作菜单</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="五、优先级设置规则" tabindex="-1">五、优先级设置规则 <a class="header-anchor" href="#五、优先级设置规则" aria-label="Permalink to &quot;五、优先级设置规则&quot;">​</a></h2><p>钩子的第三个参数为优先级，决定回调函数的执行顺序，直接影响菜单操作效果：</p><ul><li>优先级数值越小，执行越早（默认优先级为 <code>10</code>）；</li><li>需<strong>移除默认菜单</strong>时：设较低优先级（如 <code>5</code>），确保在默认菜单添加前执行移除操作；</li><li>需<strong>添加/覆盖菜单</strong>时：设较高优先级（如 <code>999</code>），避免自定义内容被其他回调覆盖；</li><li>多个回调函数时，按优先级数值从小到大执行，相同优先级按添加顺序执行。</li></ul><h2 id="六、常用方法与示例" tabindex="-1">六、常用方法与示例 <a class="header-anchor" href="#六、常用方法与示例" aria-label="Permalink to &quot;六、常用方法与示例&quot;">​</a></h2><h3 id="_1-核心方法-wp-admin-bar-对象" tabindex="-1">1. 核心方法（<code>$wp_admin_bar</code> 对象） <a class="header-anchor" href="#_1-核心方法-wp-admin-bar-对象" aria-label="Permalink to &quot;1. 核心方法（\`$wp_admin_bar\` 对象）&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法名</th><th>作用</th><th>常用参数说明</th></tr></thead><tbody><tr><td><code>add_menu(array $args)</code></td><td>添加菜单（一级/子菜单）</td><td><code>id</code>（唯一标识）、<code>parent</code>（父菜单ID，子菜单必填）、<code>title</code>（显示文字）、<code>href</code>（跳转链接）、<code>meta</code>（附加属性）</td></tr><tr><td><code>remove_node(string $id)</code></td><td>移除指定菜单</td><td><code>$id</code> 为目标菜单的唯一标识（默认菜单ID可参考官方文档）</td></tr><tr><td><code>get_node(string $id)</code></td><td>获取指定菜单的配置信息</td><td>返回菜单的数组格式配置，可用于修改后重新添加</td></tr></tbody></table><h3 id="_2-实战示例" tabindex="-1">2. 实战示例 <a class="header-anchor" href="#_2-实战示例" aria-label="Permalink to &quot;2. 实战示例&quot;">​</a></h3><h4 id="_1-添加自定义菜单-一级-子菜单" tabindex="-1">（1）添加自定义菜单（一级+子菜单） <a class="header-anchor" href="#_1-添加自定义菜单-一级-子菜单" aria-label="Permalink to &quot;（1）添加自定义菜单（一级+子菜单）&quot;">​</a></h4><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 添加自定义菜单</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin_bar_menu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;add_custom_admin_bar_menu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">999</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> add_custom_admin_bar_menu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($wp_admin_bar) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 一级菜单</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $wp_admin_bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_menu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;id&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;custom-main-menu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 唯一ID（必填）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;title&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;我的自定义菜单&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 显示文字</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;href&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> admin_url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin.php?page=custom-page&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 跳转链接</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;meta&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;class&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;custom-menu-class&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 附加CSS类</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 二级子菜单（关联一级菜单）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $wp_admin_bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_menu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;id&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;custom-submenu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;parent&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;custom-main-menu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 父菜单ID（必填）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;title&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;子菜单1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;href&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> admin_url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin.php?page=custom-subpage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;meta&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;target&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;_blank&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 新窗口打开</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-移除默认菜单" tabindex="-1">（2）移除默认菜单 <a class="header-anchor" href="#_2-移除默认菜单" aria-label="Permalink to &quot;（2）移除默认菜单&quot;">​</a></h4><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 移除不需要的默认菜单</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin_bar_menu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;remove_default_admin_bar_items&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> remove_default_admin_bar_items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($wp_admin_bar) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $wp_admin_bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove_node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;comments&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 移除「评论」菜单</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $wp_admin_bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove_node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wp-logo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 移除「WordPress标志」菜单</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $wp_admin_bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove_node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;site-name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 移除「站点名称」菜单</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $wp_admin_bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove_node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;edit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 移除「编辑」菜单（前台工具栏）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_3-修改现有菜单" tabindex="-1">（3）修改现有菜单 <a class="header-anchor" href="#_3-修改现有菜单" aria-label="Permalink to &quot;（3）修改现有菜单&quot;">​</a></h4><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改默认「站点名称」菜单</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin_bar_menu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;modify_existing_admin_bar_menu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">999</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> modify_existing_admin_bar_menu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($wp_admin_bar) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 获取现有菜单配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $site_menu </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $wp_admin_bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get_node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;site-name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ($site_menu) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 修改菜单标题和链接</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $site_menu</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">title </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;我的站点&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $site_menu</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">href </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> home_url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/dashboard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 重新添加菜单（覆盖原有配置）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $wp_admin_bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_menu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)$site_menu);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="七、适用场景" tabindex="-1">七、适用场景 <a class="header-anchor" href="#七、适用场景" aria-label="Permalink to &quot;七、适用场景&quot;">​</a></h2><ul><li>为自定义后台页面添加快捷入口（如主题设置、插件功能页）；</li><li>简化管理工具栏，移除管理员不需要的默认菜单，提升操作效率；</li><li>整合常用工具链接（如数据库备份、日志查看、快速编辑）；</li><li>为客户定制化后台时，添加品牌化菜单或常用功能入口。</li></ul><h2 id="八、官方参考与扩展资源" tabindex="-1">八、官方参考与扩展资源 <a class="header-anchor" href="#八、官方参考与扩展资源" aria-label="Permalink to &quot;八、官方参考与扩展资源&quot;">​</a></h2><ol><li>官方文档：<a href="https://developer.wordpress.org/reference/hooks/admin_bar_menu/" target="_blank" rel="noreferrer">admin_bar_menu 钩子官方说明</a></li><li>核心类参考：<a href="https://developer.wordpress.org/reference/classes/wp_admin_bar/" target="_blank" rel="noreferrer">WP_Admin_Bar 类文档</a></li><li>默认菜单ID参考：可通过 <code>var_dump($wp_admin_bar)</code> 调试输出，或查阅官方默认菜单ID清单</li></ol><h2 id="九、注意事项" tabindex="-1">九、注意事项 <a class="header-anchor" href="#九、注意事项" aria-label="Permalink to &quot;九、注意事项&quot;">​</a></h2><ol><li>调试时可通过 <code>var_dump($wp_admin_bar)</code> 查看菜单结构，但需在开发环境使用，生产环境需删除；</li><li>菜单 <code>id</code> 必须唯一，避免与默认菜单或其他自定义菜单冲突；</li><li>前台登录状态下的工具栏也会触发该钩子，若需区分后台/前台，可结合 <code>is_admin()</code> 函数判断；</li><li>优先级设置需根据需求调整，避免回调函数执行顺序导致的功能失效。</li></ol>`,32)]))}const o=i(t,[["render",l]]);export{g as __pageData,o as default};
